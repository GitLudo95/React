{"version":3,"sources":["httplib.js","iconbuttonlib.js","app.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","useStyles","makeStyles","theme","button","margin","spacing","IconLabelButtons","variant","type","color","text","icon","handleClick","classes","Button","className","startIcon","onClick","IconButton","props","StatusBar","status","Alert","severity","Form","useState","error","message","nameError","setNameError","numberError","setNumberError","newName","setNewName","newNumber","setNewNumber","Input","name","value","placeholder","onChange","event","target","existingPerson","persons","filter","person","preventDefault","nameIsEmpty","isNameValid","numberIsEmpty","isNumberValid","validateForm","length","window","confirm","updatedPerson","number","http","returnedPerson","console","log","setStatus","setTimeout","newPersonList","oldArr","updatedEntry","newArr","i","updateArray","setPersons","setSearchResults","getSearchResults","searchTerm","catch","concat","Search","onInput","setSearchTerm","results","Numbers","searchResults","map","key","App","useEffect","initialPersons","personList","criteria","toLowerCase","startsWith","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.06535365.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deleteEntry = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deleteEntry }","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\nexport default function IconLabelButtons(variant, type, color, text, icon, handleClick) {\n  const classes = useStyles();\n\n  return (\n      <Button\n        variant={variant}\n        type={type}\n        color={color}\n        className={classes.button}\n        startIcon={icon}\n        onClick={handleClick}\n      >\n        {text}\n      </Button>\n  );\n}\n","import './index.css';\n\nimport React, { useState, useEffect } from 'react';\nimport http from './httplib';\n\nimport IconLabelButtons from './iconbuttonlib';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Input from '@material-ui/core/Input';\nimport Alert from '@material-ui/lab/Alert';\n\nconst IconButton = (props) => {\n  return(\n    <span>\n      {IconLabelButtons(props.variant, props.type, props.color, props.text, props.icon, props.handleClick)}\n    </span>\n  )\n}\n\nconst StatusBar = (props) => {\n  if(props.status) {\n    return(\n      <Alert variant={props.variant} severity={props.status}>\n        {props.text}\n      </Alert>\n    )\n  } else {\n    return null;\n  }\n}\n\nconst Form = (props) => {\n  const [ nameError, setNameError ] = useState({error : false, message : ''});\n  const [ numberError, setNumberError ] = useState({error : false, message : ''});\n\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n\n  const updateNameInput = (event) => {\n    setNameError({error : false, message : ''});\n    setNewName(event.target.value);\n  }\n  const updateNumberInput = (event) => {\n    setNumberError({error : false, message : ''});\n    setNewNumber(event.target.value);\n  }\n\n  const checkIfNameExists = () => {\n    return props.persons.filter((person) => {\n      return person.name === newName\n    });\n  }\n\n  const validateForm = () => {\n    let nameIsEmpty = !newName;\n    let nameMessage = nameIsEmpty ? 'Field is required' : '';\n    let isNameValid = !nameIsEmpty;\n    setNameError({error : !isNameValid, message : nameMessage});\n\n    let numberIsEmpty = !newNumber;\n    let numberMessage = numberIsEmpty ? 'Field is required' : '';\n    let isNumberValid = !(numberIsEmpty);\n    setNumberError({error : !isNumberValid, message : numberMessage});\n    return (isNameValid && isNumberValid);\n  }\n\n  const updateArray = (oldArr, updatedEntry) => {\n    let newArr = [...oldArr];\n    let i = 0;\n    let length = newArr.length;\n    for(i; i < length; i++) {\n      if(newArr[i].id === updatedEntry.id) {\n        newArr[i] = updatedEntry;\n        break;\n      }\n    }\n    return newArr;\n  }\n\n  const handleSubmit = (event) => {\n    const existingPerson = checkIfNameExists();\n    event.preventDefault();\n    if(validateForm()) {\n        if(existingPerson.length > 0 && window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n          const updatedPerson = {...existingPerson[0]};\n          updatedPerson.number = newNumber;\n          http\n          .update(updatedPerson.id, updatedPerson)\n          .then(returnedPerson => {\n            console.log('promise fulfilled', returnedPerson);\n            props.setStatus({variant : \"filled\", status : \"success\", text : `Succesfully updated ${newName}`});\n            setTimeout(() => {         \n              props.setStatus({});  \n            }, 5000)\n            let newPersonList = updateArray(props.persons, returnedPerson);\n            props.setPersons(newPersonList);\n            props.setSearchResults(props.getSearchResults(newPersonList, props.searchTerm));\n            setNewName('');\n            setNewNumber('');\n          })\n          .catch(error => {\n            console.log(error.response.data);\n            props.setStatus({variant : \"filled\", status : \"error\", text : `Oops something went wrong: ${error.response.data.error}`});\n            setTimeout(() => {         \n              props.setStatus({});  \n            }, 10000)\n          })\n        } else if(existingPerson.length === 0) {\n          http\n          .create({ name : newName, number : newNumber})\n          .then(returnedPerson => {\n            console.log('promise fulfilled', returnedPerson);\n            props.setStatus({variant : \"filled\", status : \"success\", text : `Succesfully added ${newName}`});\n            setTimeout(() => {         \n              props.setStatus({});  \n            }, 5000)\n            let newPersonList = [...props.persons].concat(returnedPerson);\n            props.setPersons(newPersonList);\n            props.setSearchResults(props.getSearchResults(newPersonList, props.searchTerm));\n            setNewName('');\n            setNewNumber('');\n          })\n          .catch(error => {\n            console.log(error.response.data);\n            props.setStatus({variant : \"filled\", status : \"error\", text : `Oops something went wrong: ${error.response.data.error}`});\n            setTimeout(() => {         \n              props.setStatus({});  \n            }, 10000)\n          })\n      }\n    }\n  }\n\n  return(\n    <form>\n      <div>\n       <Input error={nameError.error} name='Name' type=\"text\" value={newName} placeholder='name' onChange={updateNameInput}/>\n        <div>\n          <span className='error'>{nameError.message}</span>\n        </div>\n      </div>\n      <div>\n        <Input error={numberError.error} name='Number' type=\"text\" value={newNumber} placeholder='number' onChange={updateNumberInput}/>\n        <div>\n          <span className='error'>{numberError.message}</span>\n        </div>\n      </div>\n      <div>\n      {IconLabelButtons(\"contained\", \"submit\", \"primary\", \"add\", <AddIcon/>, handleSubmit)}\n      </div>\n    </form>\n  )\n}\n\nconst Search = (props) => {\n\n  const updateSearchInput = (event) => {\n    props.setSearchTerm(event.target.value);\n    let results = props.getSearchResults(props.persons, event.target.value);\n    props.setSearchResults(results);\n  }\n  \n  return(\n    <div>\n      <Input name='Search' value={props.searchTerm} type=\"text\" placeholder='enter a searchterm' onInput={updateSearchInput}/>\n    </div>\n  )\n}\n\nconst Numbers = (props) => {\n  \n  const handleDeleteClick = (name, id) => {\n    if(window.confirm(`Do you really want to delete ${name}`)) {\n      http\n      .deleteEntry(id)\n      .then(response => {\n        console.log('promise fulfilled', response);\n        props.setStatus({variant : \"filled\", status : \"success\", text : `Succesfully deleted ${name}`});\n        setTimeout(() => {         \n          props.setStatus({});  \n        }, 5000)\n        let newPersonList = props.persons.filter(person => person.id !== id);\n        props.setPersons(newPersonList);\n        props.setSearchResults(props.getSearchResults(newPersonList, props.searchTerm));\n      })\n      .catch(error => {\n        console.log(error.response.data);\n        props.setStatus({variant : \"filled\", status : \"error\", text : `Oops something went wrong: ${error.response.data.error}`});\n        setTimeout(() => {         \n          props.setStatus({});  \n        }, 10000)\n      })\n    }\n  }\n  \n  return(\n    <div>\n      {props.searchResults.map((person) => {\n        return (\n          <li \n            key={person.id}>{person.name} {person.number} <IconButton variant=\"contained\" type=\"button\" color=\"secondary\" text=\"delete\" icon={<DeleteIcon/>} handleClick={() => handleDeleteClick(person.name, person.id)} />\n          </li>)\n      })}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([]);\n\n  const [ status, setStatus ] = useState({});\n\n  useEffect(() => {\n    http\n      .getAll()\n      .then(initialPersons => {\n        console.log('promise fulfilled', initialPersons);\n        setStatus({variant : \"filled\", status : \"success\", text : \"Succesfully retrieved phonebook\"});\n        setTimeout(() => {         \n          setStatus({});  \n        }, 5000)\n        setPersons(initialPersons);\n        setSearchResults(initialPersons);\n      })\n      .catch(error => {\n        console.log(error.response.data);\n        setStatus({variant : \"filled\", status : \"error\", text : `Oops something went wrong: ${error.response.data.error}`});\n        setTimeout(() => {         \n          setStatus({});  \n        }, 10000)\n      })\n  }, [])\n\n  const [ searchResults, setSearchResults ] = useState([...persons]);\n  const getSearchResults = (personList, criteria) => personList.filter((person) => person.name.toLowerCase().startsWith(criteria.toLowerCase()));\n\n  const [searchTerm, setSearchTerm] = useState('');\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Search persons={persons} setPersons={setPersons} searchTerm={searchTerm} setSearchTerm={setSearchTerm} searchResults={searchResults} setSearchResults={setSearchResults} getSearchResults={getSearchResults} />\n      <br></br>\n      <Form persons={persons} setPersons={setPersons} searchTerm={searchTerm} searchResults={searchResults} setSearchResults={setSearchResults} getSearchResults={getSearchResults} setStatus={setStatus} />\n      <h2>Numbers</h2>\n      <Numbers searchResults={searchResults} persons={persons} setPersons={setPersons} searchTerm={searchTerm} setSearchResults={setSearchResults} getSearchResults={getSearchResults} setStatus={setStatus} />\n      <StatusBar variant={status.variant} status={status.status} text={status.text} />\n    </div>\n  )\n}\n\nexport default App","import App from './app'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}