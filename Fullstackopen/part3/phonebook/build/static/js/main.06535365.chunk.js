(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{48:function(e,t,n){e.exports=n(76)},49:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n(25),s=n(11),c=(n(49),n(0)),o=n.n(c),u=n(21),l=n.n(u),i="/api/persons",m=function(){return l.a.get(i).then((function(e){return e.data}))},f=function(e){return l.a.post(i,e).then((function(e){return e.data}))},d=function(e,t){return l.a.put("".concat(i,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},p=n(98),v=n(96),g=Object(v.a)((function(e){return{button:{margin:e.spacing(1)}}}));function S(e,t,n,a,r,s){var c=g();return o.a.createElement(p.a,{variant:e,type:t,color:n,className:c.button,startIcon:r,onClick:s},a)}var b=n(40),E=n.n(b),O=n(41),j=n.n(O),w=n(100),y=n(99),R=function(e){return o.a.createElement("span",null,S(e.variant,e.type,e.color,e.text,e.icon,e.handleClick))},x=function(e){return e.status?o.a.createElement(y.a,{variant:e.variant,severity:e.status},e.text):null},T=function(e){var t=Object(c.useState)({error:!1,message:""}),n=Object(s.a)(t,2),u=n[0],l=n[1],i=Object(c.useState)({error:!1,message:""}),m=Object(s.a)(i,2),h=m[0],p=m[1],v=Object(c.useState)(""),g=Object(s.a)(v,2),b=g[0],O=g[1],j=Object(c.useState)(""),y=Object(s.a)(j,2),R=y[0],x=y[1];return o.a.createElement("form",null,o.a.createElement("div",null,o.a.createElement(w.a,{error:u.error,name:"Name",type:"text",value:b,placeholder:"name",onChange:function(e){l({error:!1,message:""}),O(e.target.value)}}),o.a.createElement("div",null,o.a.createElement("span",{className:"error"},u.message))),o.a.createElement("div",null,o.a.createElement(w.a,{error:h.error,name:"Number",type:"text",value:R,placeholder:"number",onChange:function(e){p({error:!1,message:""}),x(e.target.value)}}),o.a.createElement("div",null,o.a.createElement("span",{className:"error"},h.message))),o.a.createElement("div",null,S("contained","submit","primary","add",o.a.createElement(E.a,null),(function(t){var n=e.persons.filter((function(e){return e.name===b}));if(t.preventDefault(),function(){var e=!b,t=!e;l({error:!t,message:e?"Field is required":""});var n=!R,a=!n;return p({error:!a,message:n?"Field is required":""}),t&&a}())if(n.length>0&&window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var s=Object(a.a)({},n[0]);s.number=R,d(s.id,s).then((function(t){console.log("promise fulfilled",t),e.setStatus({variant:"filled",status:"success",text:"Succesfully updated ".concat(b)}),setTimeout((function(){e.setStatus({})}),5e3);var n=function(e,t){for(var n=Object(r.a)(e),a=0,s=n.length;a<s;a++)if(n[a].id===t.id){n[a]=t;break}return n}(e.persons,t);e.setPersons(n),e.setSearchResults(e.getSearchResults(n,e.searchTerm)),O(""),x("")})).catch((function(t){console.log(t.response.data),e.setStatus({variant:"filled",status:"error",text:"Oops something went wrong: ".concat(t.response.data.error)}),setTimeout((function(){e.setStatus({})}),1e4)}))}else 0===n.length&&f({name:b,number:R}).then((function(t){console.log("promise fulfilled",t),e.setStatus({variant:"filled",status:"success",text:"Succesfully added ".concat(b)}),setTimeout((function(){e.setStatus({})}),5e3);var n=Object(r.a)(e.persons).concat(t);e.setPersons(n),e.setSearchResults(e.getSearchResults(n,e.searchTerm)),O(""),x("")})).catch((function(t){console.log(t.response.data),e.setStatus({variant:"filled",status:"error",text:"Oops something went wrong: ".concat(t.response.data.error)}),setTimeout((function(){e.setStatus({})}),1e4)}))}))))},k=function(e){return o.a.createElement("div",null,o.a.createElement(w.a,{name:"Search",value:e.searchTerm,type:"text",placeholder:"enter a searchterm",onInput:function(t){e.setSearchTerm(t.target.value);var n=e.getSearchResults(e.persons,t.target.value);e.setSearchResults(n)}}))},C=function(e){return o.a.createElement("div",null,e.searchResults.map((function(t){return o.a.createElement("li",{key:t.id},t.name," ",t.number," ",o.a.createElement(R,{variant:"contained",type:"button",color:"secondary",text:"delete",icon:o.a.createElement(j.a,null),handleClick:function(){return n=t.name,a=t.id,void(window.confirm("Do you really want to delete ".concat(n))&&h(a).then((function(t){console.log("promise fulfilled",t),e.setStatus({variant:"filled",status:"success",text:"Succesfully deleted ".concat(n)}),setTimeout((function(){e.setStatus({})}),5e3);var r=e.persons.filter((function(e){return e.id!==a}));e.setPersons(r),e.setSearchResults(e.getSearchResults(r,e.searchTerm))})).catch((function(t){console.log(t.response.data),e.setStatus({variant:"filled",status:"error",text:"Oops something went wrong: ".concat(t.response.data.error)}),setTimeout((function(){e.setStatus({})}),1e4)})));var n,a}}))})))},P=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],u=Object(c.useState)({}),l=Object(s.a)(u,2),i=l[0],f=l[1];Object(c.useEffect)((function(){m().then((function(e){console.log("promise fulfilled",e),f({variant:"filled",status:"success",text:"Succesfully retrieved phonebook"}),setTimeout((function(){f({})}),5e3),a(e),v(e)})).catch((function(e){console.log(e.response.data),f({variant:"filled",status:"error",text:"Oops something went wrong: ".concat(e.response.data.error)}),setTimeout((function(){f({})}),1e4)}))}),[]);var d=Object(c.useState)(Object(r.a)(n)),h=Object(s.a)(d,2),p=h[0],v=h[1],g=function(e,t){return e.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())}))},S=Object(c.useState)(""),b=Object(s.a)(S,2),E=b[0],O=b[1];return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(k,{persons:n,setPersons:a,searchTerm:E,setSearchTerm:O,searchResults:p,setSearchResults:v,getSearchResults:g}),o.a.createElement("br",null),o.a.createElement(T,{persons:n,setPersons:a,searchTerm:E,searchResults:p,setSearchResults:v,getSearchResults:g,setStatus:f}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(C,{searchResults:p,persons:n,setPersons:a,searchTerm:E,setSearchResults:v,getSearchResults:g,setStatus:f}),o.a.createElement(x,{variant:i.variant,status:i.status,text:i.text}))},N=n(13);n.n(N).a.render(o.a.createElement(P,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.06535365.chunk.js.map