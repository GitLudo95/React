(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{48:function(e,t,n){e.exports=n(76)},49:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n(25),s=n(11),c=(n(49),n(0)),u=n.n(c),o=n(21),l=n.n(o),i="/api/persons",m=function(){return l.a.get(i).then((function(e){return e.data}))},f=function(e){return l.a.post(i,e).then((function(e){return e.data}))},h=function(e,t){return l.a.put("".concat(i,"/").concat(e),t).then((function(e){return e.data}))},d=function(e){return l.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},v=n(98),p=n(96),S=Object(p.a)((function(e){return{button:{margin:e.spacing(1)}}}));function b(e,t,n,a,r,s){var c=S();return u.a.createElement(v.a,{variant:e,type:t,color:n,className:c.button,startIcon:r,onClick:s},a)}var g=n(40),E=n.n(g),O=n(41),j=n.n(O),w=n(100),y=n(99),R=function(e){return u.a.createElement("span",null,b(e.variant,e.type,e.color,e.text,e.icon,e.handleClick))},x=function(e){return e.status?u.a.createElement(y.a,{variant:e.variant,severity:e.status},e.text):null},T=function(e){var t=Object(c.useState)({error:!1,message:""}),n=Object(s.a)(t,2),o=n[0],l=n[1],i=Object(c.useState)({error:!1,message:""}),m=Object(s.a)(i,2),d=m[0],v=m[1],p=Object(c.useState)(""),S=Object(s.a)(p,2),g=S[0],O=S[1],j=Object(c.useState)(""),y=Object(s.a)(j,2),R=y[0],x=y[1];return u.a.createElement("form",null,u.a.createElement("div",null,u.a.createElement(w.a,{error:o.error,name:"Name",type:"text",value:g,placeholder:"name",onChange:function(e){l({error:!1,message:""}),O(e.target.value)}}),u.a.createElement("div",null,u.a.createElement("span",{className:"error"},o.message))),u.a.createElement("div",null,u.a.createElement(w.a,{error:d.error,name:"Number",type:"text",value:R,placeholder:"number",onChange:function(e){v({error:!1,message:""}),x(e.target.value)}}),u.a.createElement("div",null,u.a.createElement("span",{className:"error"},d.message))),u.a.createElement("div",null,b("contained","submit","primary","add",u.a.createElement(E.a,null),(function(t){var n=e.persons.filter((function(e){return e.name===g}));if(t.preventDefault(),function(){var e=!g,t=!e;l({error:!t,message:e?"Field is required":""});var n=!R,a=!n;return v({error:!a,message:n?"Field is required":""}),t&&a}())if(n.length>0&&window.confirm("".concat(g," is already added to phonebook, replace the old number with a new one?"))){var s=Object(a.a)({},n[0]);s.number=R,h(s.id,s).then((function(t){console.log("promise fulfilled",t),e.setStatus({variant:"filled",status:"success",text:"Succesfully updated ".concat(g)}),setTimeout((function(){e.setStatus({})}),5e3);var n=function(e,t){for(var n=Object(r.a)(e),a=0,s=n.length;a<s;a++)if(n[a].id===t.id){n[a]=t;break}return n}(e.persons,t);e.setPersons(n),e.setSearchResults(e.getSearchResults(n,e.searchTerm)),O(""),x("")})).catch((function(t){e.setStatus({variant:"filled",status:"error",text:"Oops something went wrong"}),setTimeout((function(){e.setStatus({})}),5e3)}))}else 0===n.length&&f({name:g,number:R}).then((function(t){console.log("promise fulfilled",t),e.setStatus({variant:"filled",status:"success",text:"Succesfully added ".concat(g)}),setTimeout((function(){e.setStatus({})}),5e3);var n=Object(r.a)(e.persons).concat(t);e.setPersons(n),e.setSearchResults(e.getSearchResults(n,e.searchTerm)),O(""),x("")})).catch((function(t){e.setStatus({variant:"filled",status:"error",text:"Oops something went wrong"}),setTimeout((function(){e.setStatus({})}),5e3)}))}))))},k=function(e){return u.a.createElement("div",null,u.a.createElement(w.a,{name:"Search",value:e.searchTerm,type:"text",placeholder:"enter a searchterm",onInput:function(t){e.setSearchTerm(t.target.value);var n=e.getSearchResults(e.persons,t.target.value);e.setSearchResults(n)}}))},C=function(e){return u.a.createElement("div",null,e.searchResults.map((function(t){return u.a.createElement("li",{key:t.id},t.name," ",t.number," ",u.a.createElement(R,{variant:"contained",type:"button",color:"secondary",text:"delete",icon:u.a.createElement(j.a,null),handleClick:function(){return n=t.name,a=t.id,void(window.confirm("Do you really want to delete ".concat(n))&&d(a).then((function(t){console.log("promise fulfilled",t),e.setStatus({variant:"filled",status:"success",text:"Succesfully deleted ".concat(n)}),setTimeout((function(){e.setStatus({})}),5e3);var r=e.persons.filter((function(e){return e.id!==a}));e.setPersons(r),e.setSearchResults(e.getSearchResults(r,e.searchTerm))})).catch((function(t){e.setStatus({variant:"filled",status:"error",text:"Oops something went wrong"}),setTimeout((function(){e.setStatus({})}),5e3)})));var n,a}}))})))},P=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)({}),l=Object(s.a)(o,2),i=l[0],f=l[1];Object(c.useEffect)((function(){m().then((function(e){console.log("promise fulfilled",e),f({variant:"filled",status:"success",text:"Succesfully retrieved phonebook"}),setTimeout((function(){f({})}),5e3),a(e),p(e)})).catch((function(e){f({variant:"filled",status:"error",text:"Oops something went wrong"}),setTimeout((function(){f({})}),5e3)}))}),[]);var h=Object(c.useState)(Object(r.a)(n)),d=Object(s.a)(h,2),v=d[0],p=d[1],S=function(e,t){return e.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())}))},b=Object(c.useState)(""),g=Object(s.a)(b,2),E=g[0],O=g[1];return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(k,{persons:n,setPersons:a,searchTerm:E,setSearchTerm:O,searchResults:v,setSearchResults:p,getSearchResults:S}),u.a.createElement("br",null),u.a.createElement(T,{persons:n,setPersons:a,searchTerm:E,searchResults:v,setSearchResults:p,getSearchResults:S,setStatus:f}),u.a.createElement("h2",null,"Numbers"),u.a.createElement(C,{searchResults:v,persons:n,setPersons:a,searchTerm:E,setSearchResults:p,getSearchResults:S,setStatus:f}),u.a.createElement(x,{variant:i.variant,status:i.status,text:i.text}))},N=n(13);n.n(N).a.render(u.a.createElement(P,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.42457841.chunk.js.map